<html>
<head>
  <meta charset='UTF-8'>
  <title>Mviewer | Error 400</title>
  <link rel="icon" type="image/png" href="../favicon.png" />
  <link href="../lib/bootstrap/5.3.3/css/bootstrap.min.css" rel="stylesheet" />

  <style type="text/css">

  html, body{
    height: 100%;
  }

  body {
    text-align: center;
    overflow: hidden;
  }

  .layout-error {
    display: flex;
    flex-direction: column;
    justify-content: center;
    height: 100%;
}

.title {
    font-size: 5em;
    font-weight: 700;
}

.sub.text {
    font-weight: 600;
}

.text {
    font-size: larger;
    color: #656565;;
}

  </style>
</head>

<body>
  <div class="layout-error container">
		<h1 class="title mb-4">Oops !</h1>
    <div class="sub text">Il semble y avoir un probl√®me avec l'application.</div>
    <div id="message" class="text">Le fichier de configuration de l'application est incorrect.</div>
    <div class="actions-div mt-4">
      <button id="reload" type="button" class="btn btn-dark">
        Recharger la carte
      </button>
      <button id="goxml" type="button" class="btn btn-outline-dark">
        Voir le XML
      </button>
    </div>
  </div>


  <script>
    const url = new URL(window.location.href);
    const xml = url.searchParams.get("xml");

    let mess = `Le fichier de configuration <code>${xml}</code> est incorrect`
    
    document.getElementById("message").innerHTML = mess;

    const pathName = window.location.pathname.replace('/pages/error_400.html', "");
    document.querySelector("#reload").addEventListener("click", x => {
      let newUrl = `${window.location.protocol}//${window.location.host}`;
      if(pathName) {
        newUrl += `${pathName}`;
      }
      newUrl += `?config=${xml}`;
      window.location.href = newUrl;
    })
    document.querySelector("#goxml").addEventListener("click", x => {
      let newUrl = `${window.location.protocol}//${window.location.host}`;
      if(pathName) {
        newUrl += `${pathName}`;
      }
      newUrl += `/${xml}`;
      window.location.href = newUrl;
    })
  </script>
</body>
</html>
