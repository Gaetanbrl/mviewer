<html>
<head>
  <meta charset='UTF-8'>
  <title>Mviewer | Error 404</title>
  <link rel="icon" type="image/png" href="../favicon.png" />
  <link href="../lib/bootstrap/5.3.3/css/bootstrap.min.css" rel="stylesheet" />

  <style type="text/css">

  html, body{
    height: 100%;
  }

  body {
    text-align: center;
    overflow: hidden;
  }

  .layout-error {
    display: flex;
    flex-direction: column;
    justify-content: center;
    height: 100%;
}

.title {
    font-size: 5em;
    font-weight: 700;
}

.sub.text {
    font-weight: 600;
}

.text {
    font-size: larger;
    color: #656565;;
}

  </style>
</head>

<body>
  <div class="layout-error container">
		<h1 class="title mb-4">Oops !</h1>
    <div class="sub text">Il semble y avoir un probl√®me avec l'application.</div>
    <div id="message" class="text"></div>
    <div class="actions-div mt-4">
      <button id="reload" type="button" class="btn btn-dark">
        Recharger la carte
      </button>
    </div>
  </div>
  <script>
    const url = new URL(window.location.href)
    const xml = url.searchParams.get("xml");
    let mess = `Le fichier de configuration <code>${xml}</code> est introuvable.`
    
    document.getElementById("message").innerHTML = mess;

    document.querySelector("#reload").addEventListener("click", x => {
      let newUrl = `${window.location.protocol}//${window.location.host}`;
      const pathName = window.location.pathname.replace('/pages/error_404.html', "");
      if(pathName) {
        newUrl += `/${pathName}`;
      }
      newUrl += `/?config=${xml}`;
      window.location.href = newUrl;
    })
  </script>
</body>
</html>
